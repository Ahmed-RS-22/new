  const [user, setUser] = useState(null); // State to store user info
  const [error, setError] = useState(""); // State to handle logout errors

  // Fetch user from localStorage
  useEffect(() => {
    const userData = JSON.parse(localStorage.getItem("user"));
    if (userData && userData.token) {
      setUser(userData); // Set user if valid data exists
    }
  }, []);

  // Logout function
  const handleLogout = async () => {
    if (!user?.token) return; // If no user, skip logout

    try {
      const response = await fetch("https://gadetguru.mgheit.com/api/logout", {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          Authorization: `Bearer ${user.token}`, // Pass the token for authentication
        },
      });

      if (!response.ok) {
        throw new Error("Logout failed");
      }

      // Clear user data and update state
      localStorage.removeItem("user");
      setUser(null);
    } catch (err) {
      setError("Failed to log out. Please try again.");
    }
  };